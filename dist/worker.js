const a0_0x1d2168=a0_0x32ea;(function(_0x260eb0,_0x2c088d){const _0x1d16e6=a0_0x32ea,_0x22fd14=_0x260eb0();while(!![]){try{const _0x1d00e1=parseInt(_0x1d16e6(0x203))/0x1*(-parseInt(_0x1d16e6(0x220))/0x2)+-parseInt(_0x1d16e6(0x1fe))/0x3*(parseInt(_0x1d16e6(0x1db))/0x4)+-parseInt(_0x1d16e6(0x1d1))/0x5+parseInt(_0x1d16e6(0x1ca))/0x6+parseInt(_0x1d16e6(0x206))/0x7*(-parseInt(_0x1d16e6(0x1c9))/0x8)+-parseInt(_0x1d16e6(0x20c))/0x9*(parseInt(_0x1d16e6(0x1ec))/0xa)+parseInt(_0x1d16e6(0x1dd))/0xb*(parseInt(_0x1d16e6(0x20e))/0xc);if(_0x1d00e1===_0x2c088d)break;else _0x22fd14['push'](_0x22fd14['shift']());}catch(_0x595f0f){_0x22fd14['push'](_0x22fd14['shift']());}}}(a0_0x2b4d,0xb7f6b));const FIXED_UUID=a0_0x1d2168(0x22b);let 反代IP='',启用SOCKS5反代=null,启用SOCKS5全局反代=![],我的SOCKS5账号='',parsedSocks5Address={};export default{async 'fetch'(_0x2d94a2){const _0x53ac2a=a0_0x1d2168;try{const _0xcb6407=new URL(_0x2d94a2[_0x53ac2a(0x1c1)]),_0x164724=_0x2d94a2[_0x53ac2a(0x213)][_0x53ac2a(0x1ba)](_0x53ac2a(0x22f));if(_0x164724!==_0x53ac2a(0x21e))return new Response('Hello\x20World!',{'status':0xc8});else{反代IP=反代IP?反代IP:_0x2d94a2['cf'][_0x53ac2a(0x1f3)]+'.proxyIP.cmliuSSSS.NET',await 反代参数获取(_0x2d94a2);const [_0x4eed09,_0x1ab25b]=await 解析地址端口(反代IP);return await handleSPESSWebSocket(_0x2d94a2,{'parsedSocks5Address':parsedSocks5Address,'enableSocks':启用SOCKS5反代,'enableGlobalSocks':启用SOCKS5全局反代,'ProxyIP':_0x4eed09,'ProxyPort':_0x1ab25b});}}catch(_0x32be07){return new Response(_0x32be07&&_0x32be07[_0x53ac2a(0x209)]?_0x32be07[_0x53ac2a(0x209)]:String(_0x32be07),{'status':0x1f4});}}};async function handleSPESSWebSocket(_0x4e109f,_0x1669ec){const _0x42368b=a0_0x1d2168,{parsedSocks5Address:_0x4fc8af,enableSocks:_0x2cc947,enableGlobalSocks:_0xd3d0bf,ProxyIP:_0x1d2560,ProxyPort:_0x298014}=_0x1669ec,_0x2766c5=new WebSocketPair(),[_0x10e163,_0x3bf08b]=Object[_0x42368b(0x22c)](_0x2766c5);_0x3bf08b[_0x42368b(0x1c5)]();let _0x857da4=setInterval(()=>{const _0x44046f=_0x42368b;if(_0x3bf08b[_0x44046f(0x20d)]===WS_READY_STATE_OPEN)try{_0x3bf08b[_0x44046f(0x1e0)](new Uint8Array(0x0));}catch(_0x39de6c){}},0x7530);function _0x11c736(){_0x857da4&&(clearInterval(_0x857da4),_0x857da4=null);}_0x3bf08b[_0x42368b(0x1cb)](_0x42368b(0x1ff),_0x11c736),_0x3bf08b[_0x42368b(0x1cb)](_0x42368b(0x202),_0x11c736);const _0x1ff5f7=_0x4e109f['headers'][_0x42368b(0x1ba)](_0x42368b(0x219))||'',_0x1e1e6f=createWebSocketReadableStream(_0x3bf08b,_0x1ff5f7);let _0x174b6b=null,_0x580fd9=null,_0x25a22f=![];return _0x1e1e6f[_0x42368b(0x1b4)](new WritableStream({async 'write'(_0x50b5f1){const _0x3b11ac=_0x42368b;if(_0x25a22f&&_0x580fd9)return _0x580fd9(_0x50b5f1);if(_0x174b6b){try{const _0x41c1fb=_0x174b6b['writable']['getWriter']();await _0x41c1fb['write'](_0x50b5f1),_0x41c1fb['releaseLock']();}catch(_0x376325){closeSocket(_0x174b6b);throw _0x376325;}return;}const _0x5bb8b9=parseVLESSHeader(_0x50b5f1);if(_0x5bb8b9['hasError'])throw new Error(_0x5bb8b9[_0x3b11ac(0x1f9)]);if(_0x5bb8b9[_0x3b11ac(0x205)][_0x3b11ac(0x1c7)](atob(_0x3b11ac(0x222))))throw new Error('Access');const _0x229174=new Uint8Array([_0x5bb8b9[_0x3b11ac(0x231)][0x0],0x0]),_0x311512=_0x50b5f1[_0x3b11ac(0x1df)](_0x5bb8b9[_0x3b11ac(0x223)]);if(_0x5bb8b9[_0x3b11ac(0x226)]){if(_0x5bb8b9[_0x3b11ac(0x201)]===0x35){_0x25a22f=!![];const {write:_0xc7258b}=await handleUDPOutBound(_0x3bf08b,_0x229174);_0x580fd9=_0xc7258b,_0x580fd9(_0x311512);return;}else throw new Error(_0x3b11ac(0x211));}async function _0x530ab7(_0x1bad82,_0x521f77){const _0x2ea1a0=_0x3b11ac,_0x5ba833=await connect({'hostname':_0x1bad82,'port':_0x521f77},{'allowHalfOpen':!![]});_0x174b6b=_0x5ba833;const _0x3c3b22=_0x5ba833[_0x2ea1a0(0x1e9)][_0x2ea1a0(0x1c6)]();return await _0x3c3b22[_0x2ea1a0(0x1d4)](_0x311512),_0x3c3b22['releaseLock'](),_0x5ba833;}async function _0x301122(_0x4a87da,_0x3294bd){const _0x100ae5=_0x3b11ac,_0x5523bf=_0x2cc947===_0x100ae5(0x1f7)?await socks5Connect(_0x5bb8b9[_0x100ae5(0x1b7)],_0x4a87da,_0x3294bd,_0x4fc8af):await httpConnect(_0x5bb8b9[_0x100ae5(0x1b7)],_0x4a87da,_0x3294bd,_0x4fc8af);_0x174b6b=_0x5523bf;const _0x3ba97c=_0x5523bf[_0x100ae5(0x1e9)][_0x100ae5(0x1c6)]();return await _0x3ba97c['write'](_0x311512),_0x3ba97c['releaseLock'](),_0x5523bf;}async function _0x217845(){const _0x4002ad=_0x3b11ac;try{let _0x18e243;if(_0x2cc947===_0x4002ad(0x1f7))_0x18e243=await socks5Connect(_0x5bb8b9[_0x4002ad(0x1b7)],_0x5bb8b9['addressRemote'],_0x5bb8b9[_0x4002ad(0x201)],_0x4fc8af);else _0x2cc947===_0x4002ad(0x1ee)?_0x18e243=await httpConnect(_0x5bb8b9['addressType'],_0x5bb8b9['addressRemote'],_0x5bb8b9[_0x4002ad(0x201)],_0x4fc8af):_0x18e243=await connect({'hostname':_0x1d2560,'port':_0x298014},{'allowHalfOpen':!![]});_0x174b6b=_0x18e243;const _0x13cc94=_0x18e243[_0x4002ad(0x1e9)]['getWriter']();await _0x13cc94[_0x4002ad(0x1d4)](_0x311512),_0x13cc94[_0x4002ad(0x228)](),_0x18e243[_0x4002ad(0x217)][_0x4002ad(0x218)](()=>{})[_0x4002ad(0x204)](()=>{const _0x3230ac=_0x4002ad;_0x3bf08b[_0x3230ac(0x20d)]===WS_READY_STATE_OPEN&&_0x3bf08b['close'](0x3e8,_0x3230ac(0x214));}),pipeRemoteToWebSocket(_0x18e243,_0x3bf08b,_0x229174,null);}catch(_0x4d58de){closeSocket(_0x174b6b),_0x3bf08b['close'](0x3f3,_0x4002ad(0x1d7)+(_0x4d58de&&_0x4d58de[_0x4002ad(0x1f9)]?_0x4d58de[_0x4002ad(0x1f9)]:_0x4d58de));}}try{if(_0xd3d0bf){const _0x16b206=await _0x301122(_0x5bb8b9['addressRemote'],_0x5bb8b9[_0x3b11ac(0x201)]);pipeRemoteToWebSocket(_0x16b206,_0x3bf08b,_0x229174,_0x217845);}else{const _0x27b080=await _0x530ab7(_0x5bb8b9[_0x3b11ac(0x205)],_0x5bb8b9['portRemote']);pipeRemoteToWebSocket(_0x27b080,_0x3bf08b,_0x229174,_0x217845);}}catch(_0x941b1){closeSocket(_0x174b6b),_0x3bf08b[_0x3b11ac(0x1ff)](0x3f3,'连接失败:\x20'+(_0x941b1&&_0x941b1['message']?_0x941b1['message']:_0x941b1));}},'close'(){_0x174b6b&&closeSocket(_0x174b6b);}}))[_0x42368b(0x218)](_0xb1dbe2=>{const _0x321261=_0x42368b;closeSocket(_0x174b6b),_0x3bf08b[_0x321261(0x1ff)](0x3f3,_0x321261(0x1d0)+(_0xb1dbe2&&_0xb1dbe2['message']?_0xb1dbe2[_0x321261(0x1f9)]:_0xb1dbe2));}),new Response(null,{'status':0x65,'webSocket':_0x10e163});}function createWebSocketReadableStream(_0x4ca5cb,_0x7bcd1){return new ReadableStream({'start'(_0x31a7ec){const _0x30556f=a0_0x32ea;_0x4ca5cb[_0x30556f(0x1cb)](_0x30556f(0x1f9),_0x4dbacc=>{const _0x1f9df9=_0x30556f;_0x31a7ec[_0x1f9df9(0x229)](_0x4dbacc[_0x1f9df9(0x20a)]);}),_0x4ca5cb[_0x30556f(0x1cb)](_0x30556f(0x1ff),()=>{const _0x1a8eee=_0x30556f;_0x31a7ec[_0x1a8eee(0x1ff)]();}),_0x4ca5cb[_0x30556f(0x1cb)](_0x30556f(0x202),_0x181fa8=>{_0x31a7ec['error'](_0x181fa8);});if(_0x7bcd1)try{const _0x1d31ed=atob(_0x7bcd1[_0x30556f(0x1d2)](/-/g,'+')['replace'](/_/g,'/')),_0x21b6c1=Uint8Array[_0x30556f(0x1e7)](_0x1d31ed,_0x5516fe=>_0x5516fe['charCodeAt'](0x0));_0x31a7ec[_0x30556f(0x229)](_0x21b6c1['buffer']);}catch(_0x335cfb){}}});}function a0_0x32ea(_0x2a8174,_0x11e531){_0x2a8174=_0x2a8174-0x1b4;const _0x2b4df8=a0_0x2b4d();let _0x32ea05=_0x2b4df8[_0x2a8174];if(a0_0x32ea['PEuoSA']===undefined){var _0x1189a9=function(_0x3379ac){const _0x754a8f='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x2d94a2='',_0xcb6407='';for(let _0x164724=0x0,_0x4eed09,_0x1ab25b,_0x32be07=0x0;_0x1ab25b=_0x3379ac['charAt'](_0x32be07++);~_0x1ab25b&&(_0x4eed09=_0x164724%0x4?_0x4eed09*0x40+_0x1ab25b:_0x1ab25b,_0x164724++%0x4)?_0x2d94a2+=String['fromCharCode'](0xff&_0x4eed09>>(-0x2*_0x164724&0x6)):0x0){_0x1ab25b=_0x754a8f['indexOf'](_0x1ab25b);}for(let _0x4e109f=0x0,_0x1669ec=_0x2d94a2['length'];_0x4e109f<_0x1669ec;_0x4e109f++){_0xcb6407+='%'+('00'+_0x2d94a2['charCodeAt'](_0x4e109f)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0xcb6407);};a0_0x32ea['GnmteR']=_0x1189a9,a0_0x32ea['KnLjks']={},a0_0x32ea['PEuoSA']=!![];}const _0xe0b08f=_0x2b4df8[0x0],_0x35e83c=_0x2a8174+_0xe0b08f,_0x4e1bc2=a0_0x32ea['KnLjks'][_0x35e83c];return!_0x4e1bc2?(_0x32ea05=a0_0x32ea['GnmteR'](_0x32ea05),a0_0x32ea['KnLjks'][_0x35e83c]=_0x32ea05):_0x32ea05=_0x4e1bc2,_0x32ea05;}function parseVLESSHeader(_0x4172ff){const _0x46b834=a0_0x1d2168;if(_0x4172ff['byteLength']<0x18)return{'hasError':!![],'message':'无效的头部长度'};const _0x598775=new DataView(_0x4172ff),_0x40c45d=new Uint8Array(_0x4172ff[_0x46b834(0x1df)](0x0,0x1)),_0x331f02=formatUUID(new Uint8Array(_0x4172ff[_0x46b834(0x1df)](0x1,0x11)));if(FIXED_UUID&&_0x331f02!==FIXED_UUID)return{'hasError':!![],'message':_0x46b834(0x1f5)};const _0x4a695f=_0x598775[_0x46b834(0x21b)](0x11),_0x453a11=_0x598775['getUint8'](0x12+_0x4a695f);let _0x436e3f=![];if(_0x453a11===0x1){}else{if(_0x453a11===0x2)_0x436e3f=!![];else return{'hasError':!![],'message':_0x46b834(0x1b8)};}let _0x35a16e=0x13+_0x4a695f;const _0x3cc911=_0x598775[_0x46b834(0x1cd)](_0x35a16e);_0x35a16e+=0x2;const _0x4c8fbc=_0x598775['getUint8'](_0x35a16e++);let _0x337f66='';switch(_0x4c8fbc){case 0x1:_0x337f66=Array[_0x46b834(0x1e7)](new Uint8Array(_0x4172ff[_0x46b834(0x1df)](_0x35a16e,_0x35a16e+0x4)))['join']('.'),_0x35a16e+=0x4;break;case 0x2:const _0x2dc858=_0x598775[_0x46b834(0x21b)](_0x35a16e++);_0x337f66=new TextDecoder()[_0x46b834(0x22e)](_0x4172ff[_0x46b834(0x1df)](_0x35a16e,_0x35a16e+_0x2dc858)),_0x35a16e+=_0x2dc858;break;case 0x3:const _0x301e01=[];for(let _0x4d2c02=0x0;_0x4d2c02<0x8;_0x4d2c02++){_0x301e01[_0x46b834(0x1be)](_0x598775[_0x46b834(0x1cd)](_0x35a16e)[_0x46b834(0x21d)](0x10)[_0x46b834(0x1c2)](0x4,'0')),_0x35a16e+=0x2;}_0x337f66=_0x301e01['join'](':')[_0x46b834(0x1d2)](/(^|:)0+(\w)/g,_0x46b834(0x1fa));break;default:return{'hasError':!![],'message':'不支持的地址类型'};}return{'hasError':![],'addressRemote':_0x337f66,'portRemote':_0x3cc911,'rawDataIndex':_0x35a16e,'vlessVersion':_0x40c45d,'isUDP':_0x436e3f,'addressType':_0x4c8fbc};}async function pipeRemoteToWebSocket(_0x58c11c,_0x28aaae,_0x31463b,_0x1053ad=null,_0x37fda0=0x0){const _0x35f78=a0_0x1d2168,_0x3098e5=0x8,_0x521fce=0x80*0x400,_0x3032f7=0x2*0x400*0x400,_0x1167c4=0xa,_0x51f9a7=0xc8;let _0x58d01f=![],_0x19de90=![],_0x1b4496=[],_0x59058e=0x0;const _0x575855=_0x1b39a0=>{const _0x569f81=a0_0x32ea;if(_0x1b39a0[_0x569f81(0x1ef)]===0x1)return _0x1b39a0[0x0];const _0x1de7e8=_0x1b39a0[_0x569f81(0x1e5)]((_0x2ab1b7,_0x5e79a4)=>_0x2ab1b7+_0x5e79a4[_0x569f81(0x230)],0x0),_0x2281b1=new Uint8Array(_0x1de7e8);let _0x5e3f0d=0x0;for(const _0x57c3f4 of _0x1b39a0){_0x2281b1[_0x569f81(0x1d5)](_0x57c3f4,_0x5e3f0d),_0x5e3f0d+=_0x57c3f4[_0x569f81(0x230)];}return _0x2281b1;},_0x1810aa=_0x11c05a=>{const _0x346337=a0_0x32ea;let _0x50b258=0x0;while(_0x50b258<_0x11c05a['byteLength']){const _0x525d94=Math['min'](_0x50b258+_0x521fce,_0x11c05a[_0x346337(0x230)]);_0x28aaae[_0x346337(0x1e0)](_0x11c05a[_0x346337(0x1df)](_0x50b258,_0x525d94)),_0x50b258=_0x525d94;}},_0x5f1513=()=>{if(_0x28aaae['readyState']!==WS_READY_STATE_OPEN||_0x1b4496['length']===0x0)return;const _0x44724f=_0x575855(_0x1b4496);_0x1b4496=[],_0x59058e=0x0,_0x1810aa(_0x44724f);},_0x12d2f5=setInterval(_0x5f1513,_0x1167c4),_0x210ecc=_0x58c11c[_0x35f78(0x1bf)]['getReader']();try{while(!![]){const {done:_0x42f84d,value:_0x244a43}=await _0x210ecc[_0x35f78(0x212)]();if(_0x42f84d)break;_0x19de90=!![];if(_0x28aaae[_0x35f78(0x20d)]!==WS_READY_STATE_OPEN)break;if(!_0x58d01f){const _0x1ef432=new Uint8Array(_0x31463b[_0x35f78(0x230)]+_0x244a43[_0x35f78(0x230)]);_0x1ef432[_0x35f78(0x1d5)](new Uint8Array(_0x31463b),0x0),_0x1ef432[_0x35f78(0x1d5)](_0x244a43,_0x31463b[_0x35f78(0x230)]),_0x1b4496[_0x35f78(0x1be)](_0x1ef432),_0x59058e+=_0x1ef432['byteLength'],_0x58d01f=!![];}else _0x1b4496['push'](_0x244a43),_0x59058e+=_0x244a43['byteLength'];_0x59058e>=_0x3032f7&&_0x5f1513();}_0x210ecc[_0x35f78(0x228)](),_0x5f1513(),clearInterval(_0x12d2f5);if(!_0x19de90&&_0x1053ad&&_0x37fda0<_0x3098e5){const _0xc9abd6=_0x51f9a7*Math['pow'](0x2,_0x37fda0);console[_0x35f78(0x1c8)](_0x35f78(0x227)+_0xc9abd6+_0x35f78(0x232)+(_0x37fda0+0x1)+'/'+_0x3098e5+')'),await new Promise(_0x13a099=>setTimeout(_0x13a099,_0xc9abd6)),await _0x1053ad();return;}if(_0x28aaae[_0x35f78(0x20d)]===WS_READY_STATE_OPEN)_0x28aaae[_0x35f78(0x1ff)](0x3e8,_0x35f78(0x208));}catch(_0x44c810){_0x210ecc[_0x35f78(0x228)](),clearInterval(_0x12d2f5),console[_0x35f78(0x202)](_0x35f78(0x1e2),_0x44c810),closeSocket(_0x58c11c);if(_0x1053ad&&_0x37fda0<_0x3098e5){const _0x2aec80=_0x51f9a7*Math[_0x35f78(0x1d8)](0x2,_0x37fda0);console['warn'](_0x35f78(0x216)+(_0x37fda0+0x1)+'/'+_0x3098e5+_0x35f78(0x1f8)+_0x2aec80+'\x20ms\x20后重试'),await new Promise(_0x55b139=>setTimeout(_0x55b139,_0x2aec80)),await _0x1053ad();return;}_0x28aaae[_0x35f78(0x20d)]===WS_READY_STATE_OPEN&&_0x28aaae['close'](0x3f3,'数据传输错误');}}function closeSocket(_0x42c387){const _0x59edf1=a0_0x1d2168;if(_0x42c387)try{_0x42c387[_0x59edf1(0x1ff)]();}catch(_0x451c36){}}function formatUUID(_0x5aeb88){const _0x1fc0df=a0_0x1d2168,_0x2b1f0b=Array[_0x1fc0df(0x1e7)](_0x5aeb88,_0x39621d=>_0x39621d[_0x1fc0df(0x21d)](0x10)['padStart'](0x2,'0'))[_0x1fc0df(0x1ed)]('');return _0x2b1f0b[_0x1fc0df(0x1df)](0x0,0x8)+'-'+_0x2b1f0b[_0x1fc0df(0x1df)](0x8,0xc)+'-'+_0x2b1f0b[_0x1fc0df(0x1df)](0xc,0x10)+'-'+_0x2b1f0b[_0x1fc0df(0x1df)](0x10,0x14)+'-'+_0x2b1f0b[_0x1fc0df(0x1df)](0x14);}async function socks5Connect(_0x142d5e,_0x59de9b,_0x4c2191,_0xcdbd6){const _0x146fdd=a0_0x1d2168,{username:_0x4fa278,password:_0x4484f4,hostname:_0x190453,port:_0x49049f}=_0xcdbd6,_0x325efc=connect({'hostname':_0x190453,'port':_0x49049f}),_0x326e09=new Uint8Array([0x5,0x2,0x0,0x2]),_0xa9ee7c=_0x325efc[_0x146fdd(0x1e9)][_0x146fdd(0x1c6)]();await _0xa9ee7c[_0x146fdd(0x1d4)](_0x326e09);const _0x416681=_0x325efc[_0x146fdd(0x1bf)][_0x146fdd(0x1d3)](),_0x3ac6c1=new TextEncoder();let _0xe70d4d=(await _0x416681[_0x146fdd(0x212)]())['value'];if(_0xe70d4d[0x0]!==0x5)throw new Error(_0x146fdd(0x1fc)+_0xe70d4d[0x0]+'\x20expected:\x205');if(_0xe70d4d[0x1]===0xff)throw new Error(_0x146fdd(0x21c));if(_0xe70d4d[0x1]===0x2){if(!_0x4fa278||!_0x4484f4)throw new Error(_0x146fdd(0x1e3));const _0x4f99b2=new Uint8Array([0x1,_0x4fa278[_0x146fdd(0x1ef)],..._0x3ac6c1[_0x146fdd(0x1c0)](_0x4fa278),_0x4484f4['length'],..._0x3ac6c1[_0x146fdd(0x1c0)](_0x4484f4)]);await _0xa9ee7c[_0x146fdd(0x1d4)](_0x4f99b2),_0xe70d4d=(await _0x416681[_0x146fdd(0x212)]())[_0x146fdd(0x1c3)];if(_0xe70d4d[0x0]!==0x1||_0xe70d4d[0x1]!==0x0)throw new Error(_0x146fdd(0x1fd));}let _0x338338;switch(_0x142d5e){case 0x1:_0x338338=new Uint8Array([0x1,..._0x59de9b['split']('.')['map'](Number)]);break;case 0x2:_0x338338=new Uint8Array([0x3,_0x59de9b[_0x146fdd(0x1ef)],..._0x3ac6c1[_0x146fdd(0x1c0)](_0x59de9b)]);break;case 0x3:_0x338338=new Uint8Array([0x4,..._0x59de9b[_0x146fdd(0x215)](':')[_0x146fdd(0x1d9)](_0x4d85f3=>[parseInt(_0x4d85f3[_0x146fdd(0x1df)](0x0,0x2),0x10),parseInt(_0x4d85f3['slice'](0x2),0x10)])]);break;default:throw new Error(_0x146fdd(0x1f4)+_0x142d5e);}const _0x1f9f3c=new Uint8Array([0x5,0x1,0x0,..._0x338338,_0x4c2191>>0x8,_0x4c2191&0xff]);await _0xa9ee7c[_0x146fdd(0x1d4)](_0x1f9f3c),_0xe70d4d=(await _0x416681[_0x146fdd(0x212)]())['value'];if(_0xe70d4d[0x1]===0x0){}else throw new Error(_0x146fdd(0x1ea));return _0xa9ee7c[_0x146fdd(0x228)](),_0x416681['releaseLock'](),_0x325efc;}async function httpConnect(_0x4cdcdf,_0x4605f6,_0x28c3e1,_0x450695){const _0x1f7111=a0_0x1d2168,{username:_0x58f4dc,password:_0x104854,hostname:_0xc834cb,port:_0x27d26a}=_0x450695,_0x162cca=await connect({'hostname':_0xc834cb,'port':_0x27d26a});let _0x5e8c55='CONNECT\x20'+_0x4605f6+':'+_0x28c3e1+_0x1f7111(0x21f);_0x5e8c55+=_0x1f7111(0x1f2)+_0x4605f6+':'+_0x28c3e1+'\x0d\x0a';if(_0x58f4dc&&_0x104854){const _0x4ef408=_0x58f4dc+':'+_0x104854,_0x3176f3=btoa(_0x4ef408);_0x5e8c55+=_0x1f7111(0x1d6)+_0x3176f3+'\x0d\x0a';}_0x5e8c55+='User-Agent:\x20Mozilla/5.0\x20(Windows\x20NT\x2010.0;\x20Win64;\x20x64)\x20AppleWebKit/537.36\x0d\x0a',_0x5e8c55+=_0x1f7111(0x22a),_0x5e8c55+=_0x1f7111(0x1c4),_0x5e8c55+='\x0d\x0a';try{const _0x11d9e9=_0x162cca[_0x1f7111(0x1e9)]['getWriter']();await _0x11d9e9['write'](new TextEncoder()['encode'](_0x5e8c55)),_0x11d9e9[_0x1f7111(0x228)]();}catch(_0x270887){console[_0x1f7111(0x202)](_0x1f7111(0x210),_0x270887);throw new Error(_0x1f7111(0x1b9)+_0x270887[_0x1f7111(0x1f9)]);}const _0x29fb34=_0x162cca['readable'][_0x1f7111(0x1d3)]();let _0x2a93a4='',_0x5701b2=![],_0x5b2780=new Uint8Array(0x0);try{while(!![]){const {value:_0x59c190,done:_0x105a48}=await _0x29fb34[_0x1f7111(0x212)]();if(_0x105a48){console['error'](_0x1f7111(0x20b));throw new Error(_0x1f7111(0x20b));}const _0x445578=new Uint8Array(_0x5b2780['length']+_0x59c190['length']);_0x445578[_0x1f7111(0x1d5)](_0x5b2780),_0x445578[_0x1f7111(0x1d5)](_0x59c190,_0x5b2780[_0x1f7111(0x1ef)]),_0x5b2780=_0x445578,_0x2a93a4=new TextDecoder()[_0x1f7111(0x22e)](_0x5b2780);if(_0x2a93a4['includes']('\x0d\x0a\x0d\x0a')){const _0x249e32=_0x2a93a4[_0x1f7111(0x1eb)](_0x1f7111(0x233))+0x4,_0x2b12e7=_0x2a93a4[_0x1f7111(0x21a)](0x0,_0x249e32);if(_0x2b12e7[_0x1f7111(0x1f6)](_0x1f7111(0x224))||_0x2b12e7[_0x1f7111(0x1f6)](_0x1f7111(0x1bb))){_0x5701b2=!![];if(_0x249e32<_0x5b2780['length']){const _0x28ecae=_0x5b2780[_0x1f7111(0x1df)](_0x249e32),_0x5e0edf=new ReadableStream({'start'(_0x9e46b7){const _0x17d7bd=_0x1f7111;_0x9e46b7[_0x17d7bd(0x229)](_0x28ecae);}}),{readable:_0x1fa32a,writable:_0x206654}=new TransformStream();_0x5e0edf[_0x1f7111(0x1b4)](_0x206654)[_0x1f7111(0x218)](_0x1e82fd=>console['error'](_0x1f7111(0x1de),_0x1e82fd)),_0x162cca[_0x1f7111(0x1bf)]=_0x1fa32a;}}else{const _0x8a3daf=_0x1f7111(0x1b5)+_0x2b12e7[_0x1f7111(0x215)]('\x0d\x0a')[0x0];console[_0x1f7111(0x202)](_0x8a3daf);throw new Error(_0x8a3daf);}break;}}}catch(_0x2d9124){_0x29fb34['releaseLock']();throw new Error(_0x1f7111(0x1b6)+_0x2d9124['message']);}_0x29fb34['releaseLock']();if(!_0x5701b2)throw new Error('HTTP代理连接失败:\x20未收到成功响应');return _0x162cca;}async function handleUDPOutBound(_0x4cddc6,_0xd5314){const _0xd00feb=a0_0x1d2168;let _0x7cf08a=![];const _0x472836=new TransformStream({'start'(_0x17437a){},'transform'(_0x3830ee,_0x14dbd3){const _0x1293ae=a0_0x32ea;for(let _0x662ede=0x0;_0x662ede<_0x3830ee[_0x1293ae(0x230)];){const _0x9981c=_0x3830ee[_0x1293ae(0x1df)](_0x662ede,_0x662ede+0x2),_0x382b6c=new DataView(_0x9981c)['getUint16'](0x0),_0x12a2b7=new Uint8Array(_0x3830ee[_0x1293ae(0x1df)](_0x662ede+0x2,_0x662ede+0x2+_0x382b6c));_0x662ede=_0x662ede+0x2+_0x382b6c,_0x14dbd3[_0x1293ae(0x229)](_0x12a2b7);}},'flush'(_0x505f52){}});_0x472836['readable'][_0xd00feb(0x1b4)](new WritableStream({async 'write'(_0x459a81){const _0x613417=_0xd00feb,_0xfae440=await fetch(_0x613417(0x1bc),{'method':_0x613417(0x1fb),'headers':{'content-type':_0x613417(0x1e1)},'body':_0x459a81}),_0x50b65c=await _0xfae440[_0x613417(0x1f1)](),_0x3f477c=_0x50b65c['byteLength'],_0x130021=new Uint8Array([_0x3f477c>>0x8&0xff,_0x3f477c&0xff]);_0x4cddc6[_0x613417(0x20d)]===WS_READY_STATE_OPEN&&(_0x7cf08a?_0x4cddc6[_0x613417(0x1e0)](await new Blob([_0x130021,_0x50b65c])['arrayBuffer']()):(_0x4cddc6[_0x613417(0x1e0)](await new Blob([_0xd5314,_0x130021,_0x50b65c])['arrayBuffer']()),_0x7cf08a=!![]));}}))[_0xd00feb(0x218)](_0x1b45ee=>{});const _0x15b113=_0x472836[_0xd00feb(0x1e9)][_0xd00feb(0x1c6)]();return{'write'(_0x52f7e7){const _0x240e7e=_0xd00feb;_0x15b113[_0x240e7e(0x1d4)](_0x52f7e7);}};}function a0_0x2b4d(){const _0x504578=['yxbWBgLJyxrPB24Vzg5Zlw1LC3nHz2u','5PwW5O2U5lYG6l6t6zsz6k+VoG','CgXLyxnLihbYB3zPzguGDxnLCM5HBwuVCgfZC3DVCMq','z2XVyMfSChjVEhK','CMvKDwnL','Dg9mB3DLCKnHC2u','zNjVBq','ChjVEhLPCc4','D3jPDgfIBgu','zMfPBcb0BYbVCgvUihnVy2TZignVBM5Ly3rPB24','Aw5KzxHpzG','mtbJsfHrwwi','AM9PBG','Ahr0Ca','BgvUz3rO','AgfZ','yxjYyxLcDwzMzxi','sg9ZDdOG','y29SBW','Aw52ywXPzcbHzgrYzxnZvhLWzsbPCYa','5PEG5Pwi55Qe55sO5OI3','C3rHCNrZv2L0Aa','C29JA3m1','kE+8JowWHUwCQca','BwvZC2fNzq','jdeKmG','ue9tva','C29JA3mGC2vYDMvYihzLCNnPB24GzxjYB3i6ia','zMfPBcb0BYbHDxrOihnVy2TZihnLCNzLCG','mtq5n1jOuuTuuq','y2XVC2u','zMXVB3i','Cg9YDfjLBw90zq','zxjYB3i','mJi5wfHmrLrJ','zMLUywXSEq','ywrKCMvZC1jLBw90zq','mJaZn1PTsxLeza','Cg9W','5Q2J5BI45ywZ6zET','C3rHy2S','zgf0yq','sfruuos7O+EqHUI/NUAoPEs4REAwRq','otmWmZG1ogHuAezlwa','CMvHzhLtDgf0zq','mZC1nte4nJrhBunprLa','lNrW','5y+r6ycbsfruucbdt05orunu6k+35Rgc5AsX6lsLoG','vurq5lUJ55cg5lUf5PsV5OYbre5tkoERR+wpOZuZkq','CMvHza','AgvHzgvYCW','6l+E5O6L5BEY5ywZ6zET','C3bSAxq','6zsz6k+V6yEn6k+vicG','y2XVC2vK','y2f0y2G','C2vJlxDLyNnVy2TLDc1WCM90B2nVBa','C3vIC3rYAw5N','z2v0vwLUDdG','BM8GywnJzxb0ywjSzsbTzxrOB2rZ','Dg9tDhjPBMC','D2vIC29JA2v0','ieHuvfaVms4XdqO','mJyXnefQwgPoCW','Bwf0y2G','yZncBfPxuxvzmNH2zfDsBwjhrNLAuZvQyJiWpq','CMf3rgf0yuLUzgv4','sfruuc8XlJeGmJaW','5PEG5Pwi55Qeifnpq0TtiowCSowDGoAGVow8J++8MUERR+wpO+wpT+w/HEMHU+AyR+AvSowTLW','Axnvrfa','5PYQ5Ps25yIW5PwW5O2U77Ym','CMvSzwfZzuXVy2S','zw5XDwv1zq','uhjVEhKTq29UBMvJDgLVBJOGs2vLCc1bBgL2zq0k','yZrKogi0mtqTzMe2mY00oge4ltGXmJiTztHMmZrIodqWodG0','DMfSDwvZ','5PEG5Pwi55Qeifnpq0TtiowCSowDGoAGVow8J++8MUIUPoIVGEMdQowiHUw/HEMHU+AyRYaIDxnLCM5HBwu6CgfZC3DVCMqIioEAHow9OUw8JW','zgvJB2rL','vxbNCMfKzq','yNL0zuXLBMD0Aa','DMXLC3nwzxjZAw9U','ig1ZiowqJUMhJEIVLsaO','dqOncG','CgLWzvrV','sfruuos7O+EqHUI/NUAoPEwKSEI0PtOG','5Ase55cgsfruuos7O+EqHUwtJEw6LowKSEI0PtOG','ywrKCMvZC1r5Cgu','5lIn5PsV5OYb55Qe5zg95lUK77Ym5lUf5PsV5OYbvenqkdaXkEwsJfveucGWmIK','5y+r6ycbsfruucbdt05orunu6k+35Rgc5AsX6lsLoIa','z2v0','sfruuc8XlJaGmJaW','Ahr0Chm6lY8XlJeUms4Xl2rUCY1XDwvYEq','BgfZDeLUzgv4t2y','ChvZAa','CMvHzgfIBgu','zw5JB2rL','DxjS','CgfKu3rHCNq','DMfSDwu','q29UBMvJDgLVBJOGs2vLCc1bBgL2zq0k','ywnJzxb0','z2v0v3jPDgvY','Aw5JBhvKzxm','D2fYBG','mteZmtjPs1j0zfu','ntu3nJy1ohrbAgrPwq','ywrKrxzLBNrmAxn0zw5LCG','jtne','z2v0vwLUDde2','ChjVEhLPCa','CMfUzg9T','5yAf6yoO6zsz6k+VoIa','nJqYota1sKzkCuHH','CMvWBgfJzq','z2v0uMvHzgvY','D3jPDgu','C2v0','uhjVEhKTqxv0Ag9YAxPHDgLVBJOGqMfZAwmG','5lUJ55cg6l+E5O6L5AsX6lsLoIa','Cg93','zMXHDe1HCa','DgvZDa','mte0odbOtgTACNG','CMvWBgfJzufSBa','mtfgrvvwCKC','5Ase55cg5yMP5l2z5PwW5O2U6zsz6k+VoG','C2XPy2u','C2vUza'];a0_0x2b4d=function(){return _0x504578;};return a0_0x2b4d();}const WS_READY_STATE_OPEN=0x1;import{connect}from'cloudflare:sockets';async function 解析地址端口(_0x105ac7){const _0x3cf3b0=a0_0x1d2168;_0x105ac7=_0x105ac7['toLowerCase']();let _0x2ca234=_0x105ac7,_0x4e0d39=0x1bb;if(_0x105ac7[_0x3cf3b0(0x1c7)](_0x3cf3b0(0x20f))){const _0x263523=_0x105ac7[_0x3cf3b0(0x221)](/\.tp(\d+)/);if(_0x263523)_0x4e0d39=parseInt(_0x263523[0x1],0xa);return[_0x2ca234,_0x4e0d39];}if(_0x105ac7['includes'](']:')){const _0x3b4509=_0x105ac7[_0x3cf3b0(0x215)](']:');_0x2ca234=_0x3b4509[0x0]+']',_0x4e0d39=parseInt(_0x3b4509[0x1],0xa)||_0x4e0d39;}else{if(_0x105ac7[_0x3cf3b0(0x1c7)](':')&&!_0x105ac7[_0x3cf3b0(0x1f6)]('[')){const _0x93fe2d=_0x105ac7[_0x3cf3b0(0x1bd)](':');_0x2ca234=_0x105ac7[_0x3cf3b0(0x1df)](0x0,_0x93fe2d),_0x4e0d39=parseInt(_0x105ac7[_0x3cf3b0(0x1df)](_0x93fe2d+0x1),0xa)||_0x4e0d39;}}return[_0x2ca234,_0x4e0d39];}async function 反代参数获取(_0x4b05dc){const _0x5f5172=a0_0x1d2168,_0x2d2d68=new URL(_0x4b05dc[_0x5f5172(0x1c1)]),{pathname:_0x47e722,searchParams:_0x587cba}=_0x2d2d68,_0x32cc00=_0x47e722[_0x5f5172(0x1e6)]();我的SOCKS5账号=_0x587cba['get'](_0x5f5172(0x1f7))||_0x587cba['get'](_0x5f5172(0x1ee))||null,启用SOCKS5全局反代=_0x587cba['has'](_0x5f5172(0x1e4))||![];const _0x3c363c=_0x32cc00[_0x5f5172(0x221)](/\/(proxyip[.=]|pyip=|ip=)(.+)/);if(_0x587cba[_0x5f5172(0x1f0)](_0x5f5172(0x1ce))){const _0x1c54ce=_0x587cba[_0x5f5172(0x1ba)](_0x5f5172(0x1ce));反代IP=_0x1c54ce[_0x5f5172(0x1c7)](',')?_0x1c54ce['split'](',')[Math['floor'](Math['random']()*_0x1c54ce['split'](',')['length'])]:_0x1c54ce;return;}else{if(_0x3c363c){const _0x33a761=_0x3c363c[0x1]==='proxyip.'?_0x5f5172(0x1e8)+_0x3c363c[0x2]:_0x3c363c[0x2];反代IP=_0x33a761['includes'](',')?_0x33a761['split'](',')[Math[_0x5f5172(0x200)](Math[_0x5f5172(0x1cf)]()*_0x33a761[_0x5f5172(0x215)](',')[_0x5f5172(0x1ef)])]:_0x33a761;return;}}let _0x15056d;if(_0x15056d=_0x47e722[_0x5f5172(0x221)](/\/(socks5?|http):\/?\/?(.+)/i)){启用SOCKS5反代=_0x15056d[0x1][_0x5f5172(0x1e6)]()===_0x5f5172(0x1ee)?_0x5f5172(0x1ee):_0x5f5172(0x1f7),我的SOCKS5账号=_0x15056d[0x2][_0x5f5172(0x215)]('#')[0x0],启用SOCKS5全局反代=!![];if(我的SOCKS5账号[_0x5f5172(0x1c7)]('@')){const _0x3408e9=我的SOCKS5账号['lastIndexOf']('@');let _0x275123=我的SOCKS5账号['substring'](0x0,_0x3408e9)[_0x5f5172(0x1dc)](_0x5f5172(0x1cc),'=');/^(?:[A-Z0-9+/]{4})*(?:[A-Z0-9+/]{2}==|[A-Z0-9+/]{3}=)?$/i[_0x5f5172(0x1da)](_0x275123)&&!_0x275123[_0x5f5172(0x1c7)](':')&&(_0x275123=atob(_0x275123)),我的SOCKS5账号=_0x275123+'@'+我的SOCKS5账号[_0x5f5172(0x21a)](_0x3408e9+0x1);}}else{if(_0x15056d=_0x47e722[_0x5f5172(0x221)](/\/(g?s5|socks5|g?http)=(.+)/i)){const _0x131a1c=_0x15056d[0x1][_0x5f5172(0x1e6)]();我的SOCKS5账号=_0x15056d[0x2],启用SOCKS5反代=_0x131a1c[_0x5f5172(0x1c7)](_0x5f5172(0x1ee))?'http':_0x5f5172(0x1f7),启用SOCKS5全局反代=_0x131a1c[_0x5f5172(0x1f6)]('g')||启用SOCKS5全局反代;}}if(我的SOCKS5账号)try{parsedSocks5Address=await 获取SOCKS5账号(我的SOCKS5账号),启用SOCKS5反代=_0x587cba['get'](_0x5f5172(0x1ee))?_0x5f5172(0x1ee):启用SOCKS5反代;}catch(_0x58e13c){console[_0x5f5172(0x202)]('解析SOCKS5地址失败:',_0x58e13c[_0x5f5172(0x1f9)]),启用SOCKS5反代=null;}else 启用SOCKS5反代=null;}async function 获取SOCKS5账号(_0x4b638d){const _0x15cc2c=a0_0x1d2168,_0x5471cb=_0x4b638d['lastIndexOf']('@');let [_0x5c5808,_0x11ee18]=_0x5471cb===-0x1?[_0x4b638d,undefined]:[_0x4b638d[_0x15cc2c(0x21a)](_0x5471cb+0x1),_0x4b638d[_0x15cc2c(0x21a)](0x0,_0x5471cb)],_0x4b1ba0,_0x366c45,_0x3c13dc,_0x61591e;if(_0x11ee18){const _0x215214=_0x11ee18[_0x15cc2c(0x215)](':');if(_0x215214[_0x15cc2c(0x1ef)]!==0x2)throw new Error(_0x15cc2c(0x22d));[_0x4b1ba0,_0x366c45]=_0x215214;}const _0xfeb80c=_0x5c5808[_0x15cc2c(0x215)](':');if(_0xfeb80c[_0x15cc2c(0x1ef)]>0x2&&_0x5c5808[_0x15cc2c(0x1c7)](']:'))_0x61591e=Number(_0x5c5808[_0x15cc2c(0x215)](']:')[0x1][_0x15cc2c(0x1d2)](/[^\d]/g,'')),_0x3c13dc=_0x5c5808[_0x15cc2c(0x215)](']:')[0x0]+']';else _0xfeb80c[_0x15cc2c(0x1ef)]===0x2?(_0x61591e=Number(_0xfeb80c[_0x15cc2c(0x207)]()[_0x15cc2c(0x1d2)](/[^\d]/g,'')),_0x3c13dc=_0xfeb80c[_0x15cc2c(0x1ed)](':')):(_0x61591e=0x50,_0x3c13dc=_0x5c5808);if(isNaN(_0x61591e))throw new Error(_0x15cc2c(0x225));const _0x2613aa=/^\[.*\]$/;if(_0x3c13dc['includes'](':')&&!_0x2613aa[_0x15cc2c(0x1da)](_0x3c13dc))throw new Error('无效的\x20SOCKS\x20地址格式：IPv6\x20地址必须用方括号括起来，如\x20[2001:db8::1]');return{'username':_0x4b1ba0,'password':_0x366c45,'hostname':_0x3c13dc,'port':_0x61591e};}